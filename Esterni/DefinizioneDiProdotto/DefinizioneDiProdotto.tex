% Nome del file: AnalisiRequisiti.tex
% Percorso: \gl{template}
% Autore: Vault-Tech
% Data creazione: 23.12.2015
% E-mail: vaulttech.swe@gmail.comcom
%
% Diario delle modifiche: interno al file.

\documentclass[a4paper, titlepage]{article}

\usepackage[margin=3cm]{geometry}
\usepackage{float}
\usepackage{grffile}
\usepackage{../../Stile}
\usepackage{../../Comandi}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{5}

\def\NOME{Definizione di Prodotto}
\def\VERSIONE{1.0}
\def\DATA{13.05.2016}
\def\REDATTORE{Vassilikì Menarin \\ & Simone Boccato \\ & Miki Violetto \\ & Rudy Berton \\ & Michela De Bortoli}
\def\VERIFICATORE{Giacomo Beltrame \\ & Filippo Tesser}
\def\RESPONSABILE{Giacomo Beltrame}
\def\USO{Esterno}
\def\DISTRIBUZIONE{\COMMITTENTE \\ & \CARDIN \\ & \PROPONENTE}



\begin{document}
\pagestyle{fancy}	
\pagenumbering{Roman}
\rfoot{Pagina \thepage{} di \pageref{lastromanpage}}

\maketitle

\input{diary}

\newpage
\tableofcontents

\newpage
\listoffigures

\newpage
\listoftables

\newpage
\clearpage
\pagenumbering{arabic}
\rfoot{Pagina \thepage{} di \pageref*{LastPage}}

	\section{Introduzione}
	\subsection{Scopo del documento}
	Questo documento ha lo scopo di fornire tutte le informazioni necessarie alla manutenzione del \gl{software}
	Quizzipedia, descrivendone esaustivamente la struttura.
	
	\subsection{Scopo del prodotto}
	\SCOPO
	
	\subsection{Glossario}
	Al fine di evitare ogni ambiguità nel linguaggio e massimizzare la comprensione dei documenti, i termini tecnici, gli acronimi e le abbreviazioni che necessitano di definizione sono riportati nell'\hyperref[gl]{appendice B}.
	Inoltre ogni occorrenza di un vocabolo presente nel “Glossario” sarà posta in corsivo e seguita da
	una ‘g’ maiuscola a pedice (p.es. \gl{Parola}).
	
	\subsection{Riferimenti}	
	\subsubsection{Riferimenti normativi}
	\begin{itemize}
		\item \bold{\gl{Capitolato} d'appalto C5:} Quizzipedia: \gl{software} per la gestione di questionari \newline \url{http://www.math.unipd.it/~tullio/IS-1/2015/Progetto/C5.pdf};
		\item \bold{Norme di progetto:} \NdPdoc;
		\item \bold{Analisi dei requisiti: } \AdRdoc;
		\item \bold{Specifica Tecnica: } \STdoc.
		
	\end{itemize}
	
	\subsubsection{Riferimenti informativi}
	\begin{itemize}

	\item \bold{Glossario:} \Gldoc;
	
	\item \bold{\gl{HTML5}: } \newline \url{https://www.w3.org/TR/html5/};
	
	\item \bold{\gl{CSS3}: } \newline \url{https://www.w3.org/TR/CSS/};
	
	\item \bold{\gl{JavaScript}: } \newline \url{http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf};
	
	\item \bold{\gl{MongoDB}: } \newline \url{https://docs.mongodb.org/manual/};
	
	\item \bold{\gl{Node.js}: } \newline \url{https://nodejs.org/api/};
	
	\item \bold{\gl{Express.js}: } \newline \url{http://expressjs.com/en/api.html};
	
	\item \bold{\gl{AngularJS} }
	 	\begin{itemize}
	 	 \item[-] Documentazione generale:  \newline \url{https://angular.io/docs/ts/latest/};
	 	 \item[-] Documentazione servizio \$http: \newline \url{https://docs.angularjs.org/api/ng/service/$http};
	 	 \item[-] Documentazione servizio \$location:  \newline\url{https://docs.angularjs.org/api/ng/service/$location};
	 	 \item[-] Documentazione servizio \$window: \newline \url{https://docs.angularjs.org/api/ng/service/$window};
	 	\end{itemize}
	
	\item \bold{\gl{Bootstrap}: } \newline \url{http://getbootstrap.com/css/};
	
	\item \bold{\gl{JSON}: } \newline \url{http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf};
	
	\item \bold{\gl{Fabric.js}: } \newline \url{http://fabricjs.com/docs/};
	
	\item \bold{\gl{Socket.IO}: } \newline \url{http://socket.io/docs/};
	
	\item \bold{\gl{UML}: } \newline \url{http://www.omg.org/spec/UML/2.5/PDF/};
	
	\item \bold{REST:} \newline \url{https://it.wikipedia.org/wiki/Representational_State_Transfer};
	
	\item \bold{Diagrammi}
		\begin{itemize}
		\item[-] Diagrammi dei package:  \newline \url{http://www.math.unipd.it/~tullio/IS-1/2015/Dispense/E04.pdf};
		\item[-] Diagrammi delle classi: \newline \url{http://www.math.unipd.it/~tullio/IS-1/2015/Dispense/E03.pdf};
		\item[-] Diagrammi di sequenza:  \newline \url{http://www.math.unipd.it/~tullio/IS-1/2015/Dispense/E05.pdf};
		\end{itemize}
		
\end{itemize}
		
	\newpage
	
	\section{Standard di progetto}
	\subsection{Standard di progettazione architetturale}
	Gli standard di progettazione architetturale sono specificati nel documento \doc{Specifica Tecnica}. Per approfondimenti si faccia riferimento a tale documento.
	\subsection{Standard di documentazione del codice}
	Le metriche di documentazione del codice sono descritte dettagliatamente nel documento \doc{Norme di Progetto}. Per approfondimenti si faccia riferimento a tale documento.
	\subsection{Standard di denominazione di entità e relazioni}
	Le norme tipografiche descritte nel documento \doc{Norme di Progetto} regolano la denominazione
	delle entità e delle rispettive relazioni. Inoltre, nella denominazione di qualsiasi entità (che essa sia
	\gl{package}, componente o classe) verrà privilegiata chiarezza del suo nome rispetto alla sua lunghezza.
	Saranno ammesse abbreviazioni nel caso in cui non si alteri la comprensibilità del nome e non si
	crei ambiguità.
	\subsection{Standard di programmazione}
	Le regole per lo standard di programmazione sono definite nel documento \doc{Norme di Progetto}. Per approfondimenti si faccia riferimento a tale documento.
	\subsection{Strumenti di lavoro}
	Gli strumenti utilizzati per lo sviluppo del progetto sono specificati nei documenti \doc{Norme di
	Progetto}. Per approfondimenti si faccia riferimento a tale documento.

\newpage
\section{Architettura generale}
	L'architettura generale segue il pattern Three-Tier e viene suddivisa nei seguenti tre livelli:
	\begin{enumerate}
		\item \gl{Client} 
		\item \gl{Server} 
		\item \gl{Database}
	\end{enumerate}
	
	\subsubsection{Client}
	La parte \gl{client} è divisa in Model, View e ViewModel, applicando il \gl{design pattern} \gl{MVVM} dal momento che viene utilizzato \gl{AngularJS}. È il livello più alto dell'applicazione e interagisce con l'utente finale. La componente View è possibile considerarla come il Presentation Tier dell'architettura generale assunta.
	
	\subsubsection{Server}
	La parte \gl{server} è divisa in Model e Controller. Gestisce la logica di business e interroga il \gl{database} per passarne i dati al \gl{client}. Per questo nell'architettura Three-Tier rappresenta la Logic Tier.
	
	\subsubsection{Database}
	Il \gl{database} memorizza i dati e li isola dal resto del sistema. Il \gl{database}, che rappresenta il Data Tier dell'architettura Three-Tier, è implementato con \gl{MongoDB}.
	\\ \\ \\I livelli usufruiranno inoltre di alcuni framework che permetteranno loro di svolgere al meglio le proprie funzionalità.
	\\Viene pertanto presentato un diagramma generale dell'intera architettura:


\newpage
\section{Specifica componenti e classi}
\input{auto_classi}

\newpage
\section{Diagrammi di sequenza}
Questa sezione illustrerà alcuni dei diagrammi di sequenza relativi alle operazioni principali
dell'applicazione, descrivendo le interazioni che intercorrono tra attori e oggetti o entità di
sistema all'interno di uno scenario.

\subsection{Autenticazione}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.5]{Img/seq-login.pdf}
	\caption{Diagramma di sequenza dello scenario di autenticazione}
\end{figure}
Il diagramma in figura illustra la gestione da parte del prodotto di una richiesta di accesso. La sequenza di azioni viene avviata una volta che un \gl{client} invia una richiesta di autenticazione tramite un \gl{browser} \gl{web} supportato contenente i campi: indirizzo email e password.
La richiesta viene accolta da CtrlLogin, il quale chiamerà il metodo checkLogin(email: String, password: String) che comunicherà con la classe AuthenticationRouter. Questa indirizzerà la richiesta di login alla classe LoggerIn attraverso il metodo forwardTo(bundle: \gl{JSON}) che inoltrerà a sua volta i dati alla classe del model corretta, AuthenticationData, utilizzando il metodo login(email: String, password: String). Quest'ultimo effettuerà un controllo nel \gl{database} dei dati inseriti. Una volta elaborati i dati, in caso di errore dovuto alle credenziali errate verrà restituito un messaggio d'errore al \gl{client} rappresentante un problema, altrimenti in caso di successo verrà restituito l'oggetto User rappresentante l'utente stesso.

\newpage
\subsection{Registrazione}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.5]{Img/seq-register.pdf}
	\caption{Diagramma di sequenza dello scenario di registrazione}
\end{figure}
Il diagramma in figura illustra la gestione da parte del prodotto di una richiesta di registrazione. La sequenza di azioni viene avviata una volta che un \gl{client} invia una richiesta tramite un \gl{browser} \gl{web} supportato contenente i campi: 
\begin{itemize}
	\item nome,
	\item cognome,
	\item indirizzo email,
	\item conferma indirizzo email,
	\item password,
	\item conferma della password.
\end{itemize}
La richiesta viene accolta dalla classe Registration che comunica con il controller CtrlRegistration attraverso il metodo sendRegistration(User), la quale comunica a sua volta con la classe AuthenticationRouter usando il metodo sendRegistration(User).
AuthenticationRouter inoltra la richiesta alla classe Register grazie al metodo forwardTo(bundle: \gl{JSON}). Quest'ultima effettuerà un controllo nel \gl{database} dei dati inseriti. Una volta elaborati i dati, in caso di errore dovuto alla presenza nel \gl{database} dell'indirizzo email inserito verrà restituito un messaggio d'errore al \gl{client} rappresentante un problema, altrimenti in caso di successo verranno salvati i dati attraverso il metodo register(firstname: String, lastname: String, email: String, password: String) che chiama AuthenticationData. Verrà poi restituito all'utente un messaggio di conferma per comunicargli che la registrazione è stata effettuata con successo.

\newpage
\subsection{Richiesta ruolo studente}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.5]{Img/seq-rolerequest.pdf}
	\caption{Diagramma di sequenza dello scenario di richiesta ruolo studente }
\end{figure}
Il diagramma in figura illustra la gestione da parte del prodotto dell'invio delle richieste di ruolo di studente. La classe SendRequests inoltra la richiesta al controller CtrlRequestsRole utilizzando il metodo addStudent(user: String) il quale a sua volta chiama il metodo forwardTo(bundle: \gl{JSON}) per inoltrare la richiesta alla classe RoleRequestsAdder. A questo punto il metodo add(email: String, role: String) si occupa di inserire la richiesta dell'utente di assumere un determinato ruolo in RoleList.

\subsection{Accettazione ruolo}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.5]{Img/seq-acceptrequest.pdf}
	\caption{Diagramma di sequenza dello scenario di accettazione ruolo}
\end{figure}
Il diagramma in figura illustra la gestione da parte del prodotto dell'accettazione delle richieste di ruolo. Grazie al metodo accept(mailOfRequest: String) la classe ViewPendingRequests inoltra l'accettazione della richiesta al CtrlRequests il quale tramite la classe RequestsRouter inoltra tramite forwardTo(bundle: \gl{JSON}) i dati alla classe RoleAccepter. Qui la richiesta dell'utente viene contrassegnata come accettata tramite il metodo accept(email: String).

\newpage
\subsection{Ricerca quiz}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.5]{Img/seq-searchquiz.pdf}
	\caption{Diagramma di sequenza dello scenario di ricerca quiz}
\end{figure}
Il diagramma in figura illustra la gestione da parte del prodotto della ricerca di un quiz da parte di un utente. Grazie al metodo searchQuiz(mySearch: MySearchQuiz) la classe ViewSearchQuiz inoltra l'accettazione della richiesta al CtrlSearchQuiz il quale tramite la classe SearchRouter inoltra tramite forwardTo(bundle: \gl{JSON}):JSON i dati alla classe QuizSearcher. A questo punto, tramite il metodo searchQuiz(parameters: \gl{JSON}):JSON, vengono estratti dal \gl{database} e memorizzati nella classe Quiz i risultati della ricerca; infine vengono ritornati al \gl{client} che li elaborerà per essere visualizzabili dall'utente.

\newpage
\appendix
\section{Tracciamento}

\subsection{Classi - Requisiti}
\input{auto_track_clr}

\subsection{Requisiti - Classi}
\input{auto_track_rcl}

\subsection{Classi - Test di Unità}
\input{auto_track_class_test_unit}

\subsection{Test di Unità - Classi}
\input{auto_track_test_unit_class}

\end{document}
